FROM busybox:latest
ADD https://www.dropbox.com/sh/l22cilo1ze25rj4/AAAInL852sDu7LtOzQCpLCkHa/tpcclib-0.6.11-Linux-x64.tar.gz?dl=1 /packages/ecat
ENV PATH="/packages/ecat/bin:${PATH}"
LABEL org.nrg.commands="[{\"name\": \"ecat-dump\", \"label\": \"ECAT Dump\", \"description\": \"Runs Turku PET Centre's ECAT dump tool\", \"info-url\": \"http://turkupetcentre.net/programs/\", \"schema-version\": \"1.0\", \"version\": \"1.1\", \"type\": \"docker\", \"image\": \"ecat-dump\", \"command-line\": \"lmhdr /input >> /output/ecat-dump.txt && lshdr /input >> /output/ecat-dump.txt\", \"mounts\": [{\"name\": \"ecat-in\", \"type\": \"input\", \"path\": \"/input\", }, {\"name\": \"dump-out\", \"type\": \"output\", \"path\": \"/output\"}], \"inputs\": [], \"outputs\": [{\"name\": \"dump-out\", \"description\": \"The ECAT file dump\", \"mount\": \"dump-out\", \"path\": \"ecat-dump.txt\", \"required\": true}], \"xnat\": [{\"name\": \"ecat-dump-scan\", \"description\": \"Run the ECAT dump image on an XNAT ECAT scan\", \"external-inputs\": [{\"name\": \"scan\", \"description\": \"Input scan\", \"type\": \"Scan\", \"required\": true, \"matcher\": \"'ECAT' in @.resources[*].label\"}], \"derived-inputs\": [{\"name\": \"scan-ecat\", \"description\": \"The scan's ecat resource\", \"type\": \"Resource\", \"derived-from-xnat-input\": \"scan\", \"matcher\": \"@.label == 'ECAT'\"}, {\"name\": \"scan-ecat-file\", \"description\": \"The scan's ecat resource's files\", \"type\": \"File\", \"derived-from-xnat-input\": \"scan-ecats\", \"provides-files-for-command-mount\": \"ecat-in\", \"matcher\": \"@.name =~ /.*v/\"}], \"output-handlers\": [{\"name\": \"headerdump-resource\", \"accepts-command-output\": \"dump-out\", \"type\": \"Resource\", \"as-a-child-of-xnat-input\": \"scan\", \"label\": \"HEADERDUMP\"}]}]}]"
