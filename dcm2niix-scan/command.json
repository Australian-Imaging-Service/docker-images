{
    "name": "dcm2niix scan",
    "description": "Runs dcm2niix on an XNAT scan's DICOM resource",
    "docker-image": "xnat/dcm2niix-scan",
    "run": {
        "command-line": "dcm2niix -o /output /input",
        "mounts": [
            {
                "name": "dicom-in",
                "type": "input",
                "path": "/input",
                "file-input": "scan-dicoms"
            },
            {
                "name": "nifti-out",
                "type": "output",
                "path": "/output"
            }
        ]
    },
    "inputs": [
        {
            "name": "scan",
            "description": "Input scan",
            "type": "Scan",
            "required": true,
            "matcher": "'DICOM' in @.resources[*].label"
        },
        {
            "name": "scan-dicoms",
            "description": "The scan's dicom resource",
            "type": "Resource",
            "parent": "scan",
            "matcher": "@.label == 'DICOM'"
        }
    ],
    "outputs": [
        {
            "name": "nifti",
            "description": "The nifti files",
            "type": "Resource",
            "parent": "scan",
            "label": "NIFTI",
            "files": {
                "mount": "nifti-out"
            }
        }
    ]
}
